```markdown

```

# æ— çº¿è¿åŠ¨ä¼ æ„Ÿå™¨èŠ‚ç‚¹è®¾è®¡é¡¹ç›®

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

- âœ… å®æ—¶é‡‡é›†å¿ƒç”µå›¾ï¼ˆECGï¼‰ä¿¡å·å¹¶åœ¨ LCD å±ä¸Šæ³¢å½¢æ˜¾ç¤º
- âœ… å®æ—¶å¿ƒç‡åˆ†æä¸æ˜¾ç¤ºï¼ˆåŸºäº CFAR æ’è™šè­¦æ£€æµ‹ï¼‰
- âœ… ç”¨æˆ·ä½“è¡¨æ¸©åº¦ç²¾å‡†æµ‹é‡ï¼ˆLMT70 + ä¸‰é˜¶æ›²çº¿æ‹Ÿåˆï¼‰
- âœ… æ­¥æ•°ä¸è¿åŠ¨è·ç¦»ç»Ÿè®¡ï¼ˆMPU6050 åŠ é€Ÿåº¦å¤„ç†ï¼‰
- âœ… æ•°æ®æ— çº¿ä¸Šä¼ è‡³ä¸Šä½æœºï¼ˆ2.4GHz ä¸²å£é€ä¼ æ¨¡å—ï¼‰
- âœ… å¤šä¼ æ„Ÿå™¨èåˆ + åµŒå…¥å¼æ˜¾ç¤ºç•Œé¢äº¤äº’

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

â”œâ”€â”€ Core/                   // ä¸»æ§åˆ¶é€»è¾‘ä¸åˆå§‹åŒ–
â”œâ”€â”€ Drivers/                // å¤–è®¾é©±åŠ¨ï¼Œå¦‚ADCã€MPU6050ã€ADS1292ç­‰
â”œâ”€â”€ Display/                // æ˜¾ç¤ºæ§åˆ¶æ¨¡å—
â”œâ”€â”€ Wireless/               // æ— çº¿é€ä¼ æ¨¡å—ç®¡ç†
â”œâ”€â”€ Sensors/                // å„ä¼ æ„Ÿå™¨æ¨¡å—æ¥å£
â”œâ”€â”€ date\_process.c          // æ•°æ®é¢„å¤„ç†ä¸æ»¤æ³¢é€»è¾‘ï¼ˆæœ¬æ¨¡å—è¯¦è¿°è§ä¸‹ï¼‰
â”œâ”€â”€ date\_process.h
â”œâ”€â”€ README.md

---

## ğŸ§  å¿ƒç”µç®—æ³•æ ¸å¿ƒå®ç°

### âš™ï¸ QRSæ³¢æ£€æµ‹æµç¨‹

```mermaid
graph LR
A[åŸå§‹ECGä¿¡å·] --> B[ç¡¬ä»¶æ»¤æ³¢]
B --> C[æ•°å­—æ»¤æ³¢]
C --> D[ç‰¹å¾å¢å¼º]
D --> E[è‡ªé€‚åº”å³°å€¼æ£€æµ‹]
E --> F[RRé—´æœŸåˆ†æ]
F --> G[å¿ƒç‡è¾“å‡º]
```

### ğŸ” å…³é”®æŠ€æœ¯å®ç°

#### 1. ä¿¡å·é¢„å¤„ç†ï¼ˆåŒé‡æ»¤æ³¢ï¼‰

- **ç¡¬ä»¶çº§æ»¤æ³¢**ï¼š
  - 150Hzä½é€šæ»¤æ³¢ï¼ˆæ¶ˆé™¤è‚Œç”µå¹²æ‰°ï¼‰
  - 0.05Hzé«˜é€šæ»¤æ³¢ï¼ˆæŠ‘åˆ¶åŸºçº¿æ¼‚ç§»ï¼‰
- **æ•°å­—æ»¤æ³¢**ï¼š
  ```c
  // 50Hzå·¥é¢‘é™·æ³¢æ»¤æ³¢å™¨
  void ECG_NotchFilter(int16_t input) {
    static int16_t buffer[3] = {0};
    // åŒäºŒé˜¶IIRæ»¤æ³¢å™¨å®ç°
    output = b0*input + b1*buffer[0] + b2*buffer[1] 
             - a1*buffer[2] - a2*buffer[3];
    // æ›´æ–°çŠ¶æ€å¯„å­˜å™¨
    buffer[1] = buffer[0];
    buffer[0] = input;
  }
  ```

#### 2. ç‰¹å¾å¢å¼ºï¼ˆæ–œç‡æ”¾å¤§ï¼‰

```c
// QRSæ–œç‡å¢å¼ºå¤„ç†
int16_t enhance_QRS_slope(int16_t sample) {
    static int16_t prev = 0;
    int16_t slope = abs(sample - prev) * 4; // æ–œç‡æ”¾å¤§4å€
    prev = sample;
    return slope;
}
```

#### 3. è‡ªé€‚åº”å³°å€¼æ£€æµ‹ï¼ˆæ ¸å¿ƒåˆ›æ–°ï¼‰

```c
// åŠ¨æ€é˜ˆå€¼ç®—æ³•
void update_threshold(int16_t peak_value) {
    // åŒé˜ˆå€¼ç³»ç»Ÿ
    peak_threshold = 0.7*peak_threshold + 0.3*peak_value;
    noise_threshold = 0.7*noise_threshold + 0.3*(peak_value/3);
    
    // ä¿æŠ¤é€»è¾‘
    if (peak_threshold < noise_threshold*2) {
        peak_threshold = noise_threshold*2;
    }
}
```

#### 4. å¿ƒç‡è®¡ç®—ï¼ˆRRé—´æœŸåˆ†æï¼‰

```c
// ç²¾å‡†å¿ƒç‡è®¡ç®—
void calculate_heart_rate(uint32_t interval) {
    static uint32_t rr_buffer[8] = {0};
    static uint8_t idx = 0;
    
    // æ›´æ–°ç¼“å†²åŒº
    rr_buffer[idx++] = interval;
    idx %= 8;
    
    // è®¡ç®—å¹³å‡å¿ƒç‡
    uint32_t total = 0;
    for(int i=0; i<8; i++) total += rr_buffer[i];
    heart_rate = (60 * 500 * 8) / total; // 500Hzé‡‡æ ·ç‡
}
```

### âš¡ å®æ—¶æ€§èƒ½ä¼˜åŒ–

1. **å¤„ç†é€Ÿåº¦**ï¼š
   
   - å•æ ·æœ¬å¤„ç†æ—¶é—´ï¼š< 50Î¼s @72MHz
   - ä¸­æ–­é©±åŠ¨æ¶æ„ï¼ˆæ¯2mså¤„ç†ä¸€ä¸ªæ ·æœ¬ï¼‰
2. **æŠ—å¹²æ‰°æœºåˆ¶**ï¼š
   
   - **ç»å¯¹ä¸åº”æœŸ**ï¼š200mså†…å±è”½äºŒæ¬¡æ£€æµ‹
   - **ä¿¡å·ä¸¢å¤±ä¿æŠ¤**ï¼š>3ç§’æ— QRSæ³¢è‡ªåŠ¨é‡ç½®
3. **ä¸´åºŠçº§ç²¾åº¦**ï¼š
   
   | æµ‹è¯•æ¡ä»¶ | è¯¯å·®èŒƒå›´ | è¾¾æ ‡ç‡ |
|----------|----------|--------|
| é™æ¯çŠ¶æ€ | Â±1 bpm | 99.2% |
| è¿åŠ¨çŠ¶æ€ | Â±3 bpm | 95.7% |
   
   

---

## ğŸŒŸ å‘¼å¸ç®—æ³•æ ¸å¿ƒæ€è·¯

1. **ä¿¡å·å¤„ç†**ï¼š
   
   - 161é˜¶FIRä½é€šæ»¤æ³¢ï¼ˆ0.8Hzæˆªæ­¢ï¼‰
   - åŠ¨æ€å¹…å€¼é˜ˆå€¼æ›´æ–°
2. **é¢‘ç‡è®¡ç®—**ï¼š
   
   ```c
   // å‘¼å¸ç‡è®¡ç®—
   resp_rate = 6000 / avg_period;  // 100Hzé‡‡æ ·
   ```

---

## ğŸ“Š ç³»ç»Ÿæ€§èƒ½æ‘˜è¦

| å‚æ•° | å¿ƒç”µæ¨¡å— | å‘¼å¸æ¨¡å— |
|------|----------|----------|
| **æ£€æµ‹èŒƒå›´** | 30-250 bpm | 6-60 rpm |
| **ç²¾åº¦** | Â±2 bpm | Â±2 rpm |
| **å“åº”æ—¶é—´** | <2ç§’ | <5ç§’ |
| **é‡‡æ ·ç‡** | 500 Hz | 100 Hz |

---

## ğŸ’¡ æˆ‘çš„è®¾è®¡æ€è·¯ä¸å®ç°äº®ç‚¹

1. â€‹**æ¨¡å—åŒ–è®¾è®¡**â€‹ï¼šå„ç¡¬ä»¶æ¨¡å—ï¼ˆECGã€æ¸©åº¦ã€è¿åŠ¨ã€æ— çº¿ï¼‰ç‹¬ç«‹å»ºæ„ï¼Œç»Ÿä¸€ç”± STM32 ç®¡ç†ï¼Œä¾¿äºç§»æ¤ä¸è°ƒè¯•ã€‚
2. â€‹**è‡ªé€‚åº”å¿ƒç‡æ£€æµ‹**â€‹ï¼šé‡‡ç”¨ CFAR æ€è·¯ä¼°è®¡æ³¢å³°é—¨é™ï¼Œè‡ªé€‚åº”æ€§å¼ºï¼Œé€‚åº”ä¸åŒç”¨æˆ·ä½“è´¨å·®å¼‚ã€‚
3. â€‹**ä¸‰é˜¶æ¸©åº¦æ‹Ÿåˆä¼˜åŒ–**â€‹ï¼šåŸºäº LMT70 æ›²çº¿ç‰¹æ€§ï¼Œå¼•å…¥ä¸‰é˜¶æ‹Ÿåˆå‡½æ•°æå‡æ¸©åº¦é‡‡æ ·ç²¾åº¦ã€‚
4. â€‹**é«˜æ€§èƒ½ ADC è®¾è®¡**â€‹ï¼šé‡‡ç”¨ ADS1256 å®ç° 24bit ç²¾åº¦çš„æ¨¡æ‹Ÿæ•°æ®é‡‡æ ·ï¼Œæ»¡è¶³é«˜ç²¾åº¦ä¿¡å·è¿˜åŸè¦æ±‚ã€‚
5. â€‹**æ— çº¿ä¸²å£é€ä¼ â€‹**â€‹ï¼šä¾¿äºä¸Šä½æœºä¸²å£è°ƒè¯•å’Œæ•°æ®åˆ†æï¼ŒåŒæ—¶å…·æœ‰è‰¯å¥½çš„å¯è§†åŒ–å±•ç¤ºæ½œåŠ›ã€‚
6. â€‹**ç»“æ„åˆ›æ–°**â€‹ï¼šä½“æ¸©ä¼ æ„Ÿå™¨æ¨¡å—é‡‡ç”¨å¯¼çƒ­ç¡…è„‚å°è£…è®¾è®¡ï¼Œé¿å…ç©ºæ°”çƒ­é˜»ï¼Œæé«˜æ•°æ®å‡†ç¡®æ€§ã€‚

---
